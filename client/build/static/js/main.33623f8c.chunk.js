(this["webpackJsonpaccord-frontend"]=this["webpackJsonpaccord-frontend"]||[]).push([[0],{112:function(e,a,n){},113:function(e,a,n){},114:function(e,a,n){},115:function(e,a,n){},116:function(e,a,n){"use strict";n.r(a);var t=n(0),c=n.n(t),l=n(17),r=n.n(l),s=(n(71),n(72),n(32)),o=(n(73),n(36)),i=n.n(o),m=n(61),u=n.n(m),d=n(10),h=n(22),p=Object(h.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,a){e.channelId=a.payload.channelId,e.channelName=a.payload.channelName}}}),f=p.actions.setChannelInfo,E=function(e){return e.app.channelId},g=function(e){return e.app.channelName},b=p.reducer,v=(n(78),function(e){var a=e.id,n=e.channelName,t=Object(d.b)();return c.a.createElement("div",{className:"sidebarChannel",onClick:function(){return t(f({channelId:a,channelName:n}))}},c.a.createElement("h4",null,c.a.createElement("span",{className:"sidebarChannel__hash"},"#"),n))}),_=n(144),N=Object(h.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),w=N.actions,j=w.login,I=w.logout,O=function(e){return e.user.user},C=N.reducer,y=n(28),S=n.n(y),k=(S.a.initializeApp({apiKey:"AIzaSyCQahmSHoN76ypVRWHln1iu35Pp1hYXNRY",authDomain:"accord-75780.firebaseapp.com",projectId:"accord-75780",storageBucket:"accord-75780.appspot.com",messagingSenderId:"701966469016",appId:"1:701966469016:web:f6508cd13ac2ae66710ded"}).firestore(),S.a.auth()),H=new S.a.auth.GoogleAuthProvider,D=n(57),A=n.n(D).a.create({baseURL:"http://localhost:3001"}),B=n(35),L=n.n(B),R=new L.a("3a3001939979161ff763",{cluster:"us2"}),W=function(){var e=Object(d.c)(O),a=Object(t.useState)([]),n=Object(s.a)(a,2),l=n[0],r=n[1],o=function(){A.get("/get/channelList").then((function(e){r(e.data)}))};Object(t.useEffect)((function(){o(),R.subscribe("channels").bind("newChannel",(function(e){o()}))}),[]);return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__top"},c.a.createElement("h3",null,"Accord"),c.a.createElement(i.a,null)),c.a.createElement("div",{className:"sidebar__channels"},c.a.createElement("div",{className:"sidebar__channelsHeader"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(i.a,null),c.a.createElement("h4",null,"Chat Channels")),c.a.createElement(u.a,{onClick:function(e){e.preventDefault();var a=prompt("Enter a new channel name");a&&A.post("/new/channel",{channelName:a})},className:"sidebar__addChannel"})),c.a.createElement("div",{className:"sidebar__channelsList"},l.map((function(e){return c.a.createElement(v,{key:e.id,id:e.id,channelName:e.name})})))),c.a.createElement("div",{className:"sidebar__voice"},c.a.createElement("div",{className:"sidebar__voiceInfo"},c.a.createElement("h3",null,"Connected"),c.a.createElement("p",null,"To Chat")),c.a.createElement("div",{className:"sidebar__voiceIcons"})),c.a.createElement("div",{className:"sidebar__profile"},c.a.createElement(_.a,{src:e.photo,onClick:function(){return k.signOut()}}),c.a.createElement("div",{className:"sidebar__profileInfo"},c.a.createElement("h3",null,e.displayName),c.a.createElement("p",null,"#",e.uid.substring(0,5))),c.a.createElement("div",{className:"sidebar__profileIcons"})))},x=(n(112),n(113),n(62)),z=n.n(x),M=function(e){var a=e.channelName;return c.a.createElement("div",{className:"chatHeader"},c.a.createElement("div",{className:"chatHeader__left"},c.a.createElement("h3",null,c.a.createElement("span",{className:"chatHeader__hash"},"#"),a)),c.a.createElement("div",{className:"chatHeader__right"},c.a.createElement("div",{className:"chatHeader__search"},c.a.createElement("input",{type:"text",placeholder:"Search"}),c.a.createElement(z.a,null))))},P=n(63),J=n.n(P),U=n(41),Y=n.n(U),F=(n(114),function(e){var a=e.timestamp,n=e.user,t=e.message;return c.a.createElement("div",{className:"message"},c.a.createElement(_.a,{src:n.photo}),c.a.createElement("div",{className:"message__info"},c.a.createElement("h4",null,n.displayName,c.a.createElement("span",{className:"message__timestamp"},new Date(parseInt(a)).toDateString())),c.a.createElement("p",null,t)))}),G=new L.a("3a3001939979161ff763",{cluster:"us2"}),K=function(){var e=Object(d.c)(O),a=Object(d.c)(E),n=Object(d.c)(g),l=Object(t.useState)(""),r=Object(s.a)(l,2),o=r[0],i=r[1],m=Object(t.useState)([]),u=Object(s.a)(m,2),h=u[0],p=u[1],f=function(e){e&&A.get("/get/conversation?id=".concat(e)).then((function(e){p(e.data[0].conversation)}))};Object(t.useEffect)((function(){f(a),G.subscribe("conversation").bind("newMessage",(function(e){f(a)}))}),[a]);return c.a.createElement("div",{className:"chat"},c.a.createElement(M,{channelName:n}),c.a.createElement("div",{className:"chat__messages"},h.map((function(e){console.log(e)})),h.map((function(e){return c.a.createElement(F,{message:e.message,timestamp:e.timestamp,user:e.user})}))),c.a.createElement("div",{className:"chat__input"},c.a.createElement(J.a,{fontSize:"large"}),c.a.createElement("form",null,c.a.createElement("input",{type:"text",disabled:!a,value:o,onChange:function(e){return i(e.target.value)},placeholder:"Message #".concat(n)}),c.a.createElement("button",{className:"chat__inputButton",onClick:function(n){n.preventDefault(),A.post("/new/message?id=".concat(a),{message:o,timestamp:Date.now(),user:e}),i("")},disabled:!a,type:"submit"},c.a.createElement(Y.a,null))),c.a.createElement("div",{className:"chat__inputIcon"})))},Q=n(143),T=(n(115),function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__logo"},c.a.createElement("img",{src:"https://www.freepnglogos.com/uploads/discord-logo-png/discord-logo-logodownload-download-logotipos-1.png",alt:"discord logo"})),c.a.createElement(Q.a,{onClick:function(){k.signInWithPopup(H).catch((function(e){return alert(e.message)}))}},"Sign In"))});var V=function(){var e=Object(d.b)(),a=Object(d.c)(O);return Object(t.useEffect)((function(){k.onAuthStateChanged((function(a){console.log(a),e(a?j({uid:a.uid,photo:a.photoURL,email:a.email,displayName:a.displayName}):I())}))}),[e]),console.log(a),c.a.createElement("div",{className:"app"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(K,null),c.a.createElement(W,null)):c.a.createElement(T,null))},X=Object(h.a)({reducer:{user:C,app:b}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.a,{store:X},c.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,a,n){e.exports=n(116)},71:function(e,a,n){},72:function(e,a,n){},73:function(e,a,n){},78:function(e,a,n){}},[[66,1,2]]]);
//# sourceMappingURL=main.33623f8c.chunk.js.map